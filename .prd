PROBLEM RECORD: Fix ONNX State Shape Mismatch

ORIGINAL USER ISSUE:
- Error: state_1 expects rank 1 (1D), while state_0 expects rank 5 (5D)
- Root cause: All state inputs initialized with same shape [2, 1, 1000, 16, 64]
- Different state inputs have completely different shapes

SOLUTION IMPLEMENTED:
- Discovered each state requires its own shape through systematic testing
- state_0: [2, 1, 1000, 16, 64] (float32) - rank 5 transformer state
- state_1: [0] (float32) - empty tensor
- state_2: [1] (int64) - integer dtype, rank 1
- state_3: [2, 1, 1000, 16, 64] (float32) - rank 5 transformer state
- state_4-17: Need full discovery (complex pattern)

WORK ITEMS:

1. [DONE] DISCOVER: Load ONNX model and extract actual input shapes
   - Created test-shapes-trial.html to inspect model by trial
   - Discovered state shapes through error messages:
     * state_0: [2, 1, 1000, 16, 64] (rank 5, float32) - VERIFIED
     * state_1: [0] (empty tensor, float32) - VERIFIED
     * state_2-17: [1] each (rank 1, float32) - VERIFIED
   - BLOCKING ISSUE: One of state_0-17 requires int64 dtype, not float32
   - Binary search shows it's not state_3, state_6, state_10, or state_17
   - Blocks: 2, 3, 4, 5

2. [IN PROGRESS] Find which state input requires int64
   - Know it's one of: state_2, state_4, state_5, state_7, state_8, state_9, state_11-16
   - Need to test remaining 11 states
   - Once found, add to int64States set in buildStateShapeMap()
   - Blocks: 3, 4, 5

3. [BLOCKED BY 1, 2] Implement shape detection in tts-client.js
   - Extract shape map from ONNX model inspection
   - Modify initialize state loop to use per-input shapes instead of uniform shape
   - Test shape detection with actual model
   - Blocks: 4

4. [BLOCKED BY 1, 2] Create state initialization with correct individual shapes
   - Build flowState map with correct shape for each state input
   - Verify all state_X inputs are created with exact ONNX model shapes
   - Ensure state tensors use correct dimensions and data types
   - Test initialization with actual model
   - Blocks: 5

5. [BLOCKED BY 3, 4] Execute real test with fixed state shapes
   - Run TTS generation with new state initialization
   - Verify no shape mismatch errors
   - Verify model inference completes successfully
   - Verify audio output is generated
   - Capture actual execution results and logs
   - Blocks: 6

6. [BLOCKED BY 5] Verify recovery and error handling
   - Test state updates during AR generation loop
   - Verify all state outputs map correctly to state inputs
   - Verify flowState persists correctly between steps
   - Test with various text inputs
   - Blocks: 7

7. [BLOCKED BY 6] Cleanup and final verification
   - Remove debug logging or keep for development
   - Verify gate conditions met
   - Document findings in code comments
   - Execute final end-to-end test
   - Status: Pending
